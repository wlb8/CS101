import csv

while True:
    try:
        min_mpg = float(input("Enter the minimum mpg ==> "))
        if min_mpg <= 0:
            print("Minimum mpg must be more than 0")
            continue
        if min_mpg >= 100:
            print("Minimum mpg must be less than 100")
            continue
        elif min_mpg == float(min_mpg):
            break

    except ValueError:
        print("Please enter a valid mpg")

while True:
    try:
        vfile = input("Enter the name of the input vechile file ==> ")
        if vfile == 'vehicles.txt':
            out_file = input("Enter the file you would like to output to ==> ")
            with open('vehicles.txt', 'r') as csvfile:
                rfile = csv.reader(csvfile, delimiter='\t')
                out_put = open(out_file, 'w')
                for car in rfile:
                    if int(car[-3]) >= min_mpg:
                        out_put.write(car[0])
                        out_put.write('\t')
                        out_put.write(car[1])
                        out_put.write(car[2])
                        out_put.write(car[-3])
                        out_put.write('\n')
                out_put.close()
        if vfile == 'vehicles2.txt':
            out_file = input("Enter the file you would like to output to ==> ")
            with open('vehicles2.txt', 'r') as csvfile:
                rfile = csv.reader(csvfile, delimiter='\t')
                for car in rfile:
                    if int(car[-2]) >= min_mpg:
                        print(car)
    except FileNotFoundError:
        print("Could not open", vfile)
    except IOError:
        print("This is an IO Error", vfile)
    if vfile == 'stop':
        exit()
    
    out_put = open(out_file, 'r')
    print(out_put.read())
